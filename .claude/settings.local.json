{
  "permissions": {
    "allow": [
      "Bash(git fetch --all --prune)",
      "Bash(pwsh -Command \".specify/scripts/powershell/create-new-feature.ps1 -Json -Number 1 -ShortName ''textbook-website'' -FeatureDescription ''Build a premium, interactive, and fully responsive textbook website titled \"\"Physical AI & Humanoid Robotics: The Future of Embodied Intelligence\"\" using Docusaurus 3.7.''\")",
      "Bash(pwsh -Command \".specify/scripts/powershell/setup-plan.ps1 -Json\")",
      "Bash(pwsh -Command \".specify/scripts/powershell/check-prerequisites.ps1 -Json\")",
      "Bash(pwsh -Command \".specify/scripts/powershell/check-prerequisites.ps1 -Json -RequireTasks -IncludeTasks\")",
      "Bash(git rev-parse --git-dir)",
      "Bash(npm install)",
      "Bash(npm start)",
      "Bash(npx docusaurus start --port 3001)",
      "Bash(powershell -ExecutionPolicy Bypass -File \".specify/scripts/powershell/create-new-feature.ps1\" -Json -Number 1 -ShortName 'rag-backend' -FeatureDescription '# Backend Specification: Physical AI RAG System\n\n## 1. System Overview\nThe backend serves as the intelligence layer for the Physical AI Textbook. It intercepts user queries, retrieves context from vector storage, and synthesizes answers using Google''s Gemini models.\n\n## 2. Architecture\n\n### 2.1 Tech Stack\n-   **Runtime**: Python 3.11+\n-   **Web Server**: FastAPI + Uvicorn\n-   **LLM**: Google Gemini 2.0 Flash \\(via `openai` SDK\\)\n-   **Embeddings**: Google `text-embedding-004` \\(768d\\)\n-   **Vector DB**: Qdrant Cloud\n\n### 2.2 Data Flow\n1.  **Request**: Frontend sends JSON payload to `POST /api/ask`.\n2.  **Embedding**: Backend embeds query using `text-embedding-004`.\n3.  **Retrieval**: Qdrant searches `physical_ai_textbook` collection for top-k similar chunks.\n4.  **Synthesis**: Gemini 2.0 Flash receives `\\(System Prompt + Context + Question\\)`.\n5.  **Response**: JSON containing the answer is sent back.\n\n## 3. API Reference\n\n### 3.1 `POST /api/ask`\n**Summary**: Main RAG question answering endpoint.\n\n**Request Body**:\n```json\n{\n  \"\"question\"\": \"\"string\"\"\n}\n```\n\n**Response**:\n```json\n{\n  \"\"answer\"\": \"\"string\"\",\n  \"\"sources\"\": [\"\"string\"\"]\n}\n```\n\n### 3.2 `POST /api/ask-selection`\n**Summary**: Contextual explanation of selected text.\n\n**Request Body**:\n```json\n{\n  \"\"selection\"\": \"\"string\"\",\n  \"\"question\"\": \"\"string \\(optional\\)\"\"\n}\n```\n\n**Response**:\n```json\n{\n  \"\"answer\"\": \"\"string\"\"\n}\n```\n\n### 3.3 `GET /api/health`\n**Summary**: Service health check.\n**Response**: `{\"\"status\"\": \"\"ok\"\", \"\"model\"\": \"\"gemini-2.0-flash\"\"}`\n\n## 4. Configuration\nRequired Environment Variables:\n-   `GEMINI_API_KEY`: API Key for Google AI Studio.\n-   `QDRANT_URL`: URL of Qdrant instance.\n-   `QDRANT_API_KEY`: API Key for Qdrant.\n-   `NEON_DB_URL`: sdf asdf')",
      "Bash(powershell -ExecutionPolicy Bypass -File \".specify/scripts/powershell/setup-plan.ps1\" -Json)",
      "Bash(powershell -ExecutionPolicy Bypass -File \".specify/scripts/powershell/check-prerequisites.ps1\" -Json)",
      "Bash(powershell -ExecutionPolicy Bypass -File \".specify/scripts/powershell/check-prerequisites.ps1\" -Json -RequireTasks -IncludeTasks)",
      "Bash(pip install -r requirements.txt)",
      "Bash(python -c \"from app.main import app; print\\(''Application loaded successfully''\\)\")",
      "Bash(python test_endpoints.py)",
      "Bash(python -c \"from app.api.v1.health import router; print\\(''Health router loaded successfully''\\)\")",
      "Bash(python -c \"from app.main import app; from fastapi.testclient import TestClient; client = TestClient\\(app\\); response = client.get\\(''/''\\); print\\(''Root endpoint status:'', response.status_code\\); print\\(''Root endpoint data:'', response.json\\(\\)\\)\")",
      "Bash(python simple_test.py)",
      "Bash(python index_chapters.py)",
      "Bash(uvicorn app.main:app --reload --port 8000)",
      "Bash(python -m uvicorn app.main:app --reload --port 8000)",
      "Bash(python test_rag_backend.py)",
      "Bash(python ../test_rag_backend.py)",
      "Bash(python test_api_key.py)",
      "Bash(pip install python-dotenv)",
      "Bash(python -c \"from dotenv import load_dotenv; load_dotenv\\(\\); import os; print\\(''GEMINI_API_KEY exists:'', bool\\(os.getenv\\(''GEMINI_API_KEY''\\)\\)\\); print\\(''Value:'', os.getenv\\(''GEMINI_API_KEY'', ''NOT FOUND''\\)[:10] + ''...''\\)\")",
      "Bash(python -c \"from dotenv import load_dotenv; load_dotenv\\(\\); exec\\(open\\(''test_api_key.py''\\).read\\(\\)\\)\")",
      "Bash(mv \"C:\\\\giaic_hackathon_1_task-1 - Copy - Copy\\\\backend\\\\app\\\\services\\\\gemini_client.py\" \"C:\\\\giaic_hackathon_1_task-1 - Copy - Copy\\\\backend\\\\app\\\\services\\\\cohere_client.py\")",
      "Bash(python -c \"from app.services.cohere_client import cohere_client; print\\(''Cohere client imported successfully''\\)\")",
      "Bash(python -c \"from app.main import app; print\\(''Main application loaded successfully''\\)\")",
      "Bash(python -c \"\nfrom app.services.cohere_client import cohere_client\nfrom app.services.embedding import embedding_service\nfrom app.services.rag_engine import rag_engine\nprint\\(''All services imported successfully''\\)\nprint\\(f''Cohere client model: {cohere_client.model}''\\)\nprint\\(f''Embedding service model: {embedding_service.model}''\\)\n\")",
      "Bash(python -c \"\nimport asyncio\nfrom app.services.rag_engine import rag_engine\n\nasync def test_rag\\(\\):\n    result = await rag_engine.generate_answer\\(''What is embodied intelligence?''\\)\n    print\\(''RAG Response:'', result\\)\n\nasyncio.run\\(test_rag\\(\\)\\)\n\")",
      "Bash(python recreate_collection.py)"
    ]
  }
}
